
---

### üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞](#-–æ–±–∑–æ—Ä-–ø—Ä–æ–µ–∫—Ç–∞)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏](#-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–∑–∞–ø—É—Å–∫)
- [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
- [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
- [–ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#-–º–∏–≥—Ä–∞—Ü–∏–∏-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [–ì–∞–π–¥ –¥–ª—è –∫–æ–Ω—Ç—Ä–∏–±—å—é—Ç–µ—Ä–æ–≤](#-–≥–∞–π–¥-–¥–ª—è-–∫–æ–Ω—Ç—Ä–∏–±—å—é—Ç–µ—Ä–æ–≤)
- [–°—Ç–∏–ª—å –∫–æ–¥–∞](#-—Å—Ç–∏–ª—å-–∫–æ–¥–∞)
- [–°–æ–≥–ª–∞—à–µ–Ω–∏—è –ø–æ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—é](#-—Å–æ–≥–ª–∞—à–µ–Ω–∏—è-–ø–æ-–∏–º–µ–Ω–æ–≤–∞–Ω–∏—é)
- [–ö–æ–º–∞–Ω–¥—ã Make](#-–∫–æ–º–∞–Ω–¥—ã-make)

---

### üß© –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

`wesp1nzee-crm-expertiz` ‚Äî —ç—Ç–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–µ–ª–∞–º–∏, –∫–ª–∏–µ–Ω—Ç–∞–º–∏, –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏, –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º –∏ –ø–æ—á—Ç–æ–π. –ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ Python-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ FastAPI, ORM SQLAlchemy –∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL. –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ—Å—Å–∏–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Redis, –∞ –¥–ª—è —Ñ–∞–π–ª–æ–≤ ‚Äî S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.

**–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç):**

- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, —Å–µ—Å—Å–∏–∏, RBAC.
- **–ö–ª–∏–µ–Ω—Ç—ã**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–º–∏ –∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º–∏ –ª–∏—Ü–∞–º–∏.
- **–î–µ–ª–∞ (Cases)**: –°–≤—è–∑—å —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏, —Å—Ç–∞—Ç—É—Å—ã, –ø—Ä–∏–º–µ—á–∞–Ω–∏—è.
- **–î–æ–∫—É–º–µ–Ω—Ç—ã**: –ó–∞–≥—Ä—É–∑–∫–∞, —Ö—Ä–∞–Ω–µ–Ω–∏–µ, –ø—Ä–∏–≤—è–∑–∫–∞ –∫ –¥–µ–ª–∞–º, —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π.
- **–ö–∞–ª–µ–Ω–¥–∞—Ä—å**: –°–æ–±—ã—Ç–∏—è –∏ –∑–∞–¥–∞—á–∏.
- **–ö–æ–º–ø–∞–Ω–∏–∏**: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –∫–æ–º–ø–∞–Ω–∏–π –∏ –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤.
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –°–µ—Å—Å–∏–∏, RBAC, —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π.

---

### üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
wesp1nzee-crm-expertiz/
‚îú‚îÄ‚îÄ README.md                    # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ alembic.ini                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Alembic
‚îú‚îÄ‚îÄ Makefile                     # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îú‚îÄ‚îÄ pyproject.toml               # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ .env.example                 # –ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ .pre-commit-config.yaml      # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ pre-commit
‚îú‚îÄ‚îÄ .python-version              # –í–µ—Ä—Å–∏—è Python
‚îú‚îÄ‚îÄ alembic/                     # –°–∫—Ä–∏–ø—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ README
‚îÇ   ‚îú‚îÄ‚îÄ env.py
‚îÇ   ‚îú‚îÄ‚îÄ script.py.mako
‚îÇ   ‚îî‚îÄ‚îÄ versions/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main.py                  # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îî‚îÄ‚îÄ app/
‚îÇ       ‚îú‚îÄ‚îÄ core/                # –Ø–¥—Ä–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ auth/            # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, —Å–µ—Å—Å–∏–∏, RBAC
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ config/          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (settings)
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ database/        # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ —Å–µ—Å—Å–∏–∏ –∫ –ë–î
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ redis/           # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Redis
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ storage/         # –†–∞–±–æ—Ç–∞ —Å S3-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º
‚îÇ       ‚îî‚îÄ‚îÄ services/            # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω–∞—è –Ω–∞ –º–æ–¥—É–ª–∏
‚îÇ           ‚îú‚îÄ‚îÄ calendar/        # –ö–∞–ª–µ–Ω–¥–∞—Ä—å (—Å–æ–±—ã—Ç–∏—è, –∑–∞–¥–∞—á–∏)
‚îÇ           ‚îú‚îÄ‚îÄ case/            # –î–µ–ª–∞
‚îÇ           ‚îú‚îÄ‚îÄ client/          # –ö–ª–∏–µ–Ω—Ç—ã
‚îÇ           ‚îú‚îÄ‚îÄ company/         # –ö–æ–º–ø–∞–Ω–∏–∏
‚îÇ           ‚îú‚îÄ‚îÄ document/        # –î–æ–∫—É–º–µ–Ω—Ç—ã, –ø–∞–ø–∫–∏
‚îÇ           ‚îú‚îÄ‚îÄ mail/            # (–ó–∞–≥–ª—É—à–∫–∞, –º–æ–¥–µ–ª–∏)
‚îÇ           ‚îî‚îÄ‚îÄ user/            # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
‚îî‚îÄ‚îÄ tests/                       # –¢–µ—Å—Ç—ã
    ‚îú‚îÄ‚îÄ conftest.py
    ‚îî‚îÄ‚îÄ services/
        ‚îî‚îÄ‚îÄ client/
            ‚îî‚îÄ‚îÄ test_endpoints.py
```

---

### üîß –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è:** Python 3.14
- **–í–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫:** [FastAPI](https://fastapi.tiangolo.com/)
- **ORM:** [SQLAlchemy](https://www.sqlalchemy.org/) (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ä–µ–∂–∏–º)
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL (—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `asyncpg`)
- **–ö—ç—à/–°–µ—Å—Å–∏–∏:** Redis
- **–•—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–∞–π–ª–æ–≤:** S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ (MinIO, AWS S3)
- **–ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î:** [Alembic](https://alembic.sqlalchemy.org/)
- **–í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:** [uv](https://github.com/astral-sh/uv)
- **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞:** [Ruff](https://docs.astral.sh/ruff/)
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤:** [mypy](https://mypy.readthedocs.io/en/stable/)
- **Pre-commit hooks:** –î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏

---

### üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –î–ª—è —Ä–∞–±–æ—Ç—ã —Ç—Ä–µ–±—É–µ—Ç—Å—è `Python >= 3.14`, `uv`, `docker`, `docker-compose`.

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**

   ```bash
   git clone <your-repo-url>
   cd wesp1nzee-crm-expertiz
   ```

2. **–°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª:**

   ```bash
   cp .env.example .env
   ```
   –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` –ø–æ–¥ —Å–≤–æ–∏ –Ω—É–∂–¥—ã (—Å–º. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–æ–∫—Ä—É–∂–µ–Ω–∏—è)).

3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**

   ```bash
   uv sync
   ```

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É (PostgreSQL, Redis):**


–ï—Å–ª–∏ –≤—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (PostgreSQL, Redis, MinIO) –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏ —Å –ø–æ–º–æ—â—å—é `docker run`, —Å–ª–µ–¥—É–π—Ç–µ —ç—Ç–∏–º —à–∞–≥–∞–º. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏–ª–∏ –æ—Ç–ª–∞–¥–∫–∏.

#### 1. –ó–∞–ø—É—Å–∫ PostgreSQL

```bash
docker run --name crm-postgres \
  -e POSTGRES_DB=crm_db \
  -e POSTGRES_USER=your_postgres_user \
  -e POSTGRES_PASSWORD=your_postgres_password \
  -p 5432:5432 \
  -d postgres:17-alpine
```

> **–í–∞–∂–Ω–æ:** –ó–∞–º–µ–Ω–∏—Ç–µ `your_postgres_user` –∏ `your_postgres_password` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. –≠—Ç–∏ –∂–µ –¥–∞–Ω–Ω—ã–µ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —É–∫–∞–∑–∞—Ç—å –≤ `DB_URL` –≤ —Ñ–∞–π–ª–µ `.env`:
> `DB_URL=postgresql+asyncpg://your_postgres_user:your_postgres_password@localhost:5432/crm_db`

#### 2. –ó–∞–ø—É—Å–∫ Redis

```bash
docker run --name crm-redis \
  -p 6379:6379 \
  -d redis:latest
```

> **–í–∞–∂–Ω–æ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `REDIS_URL` –≤ `.env` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ `redis://localhost:6379`.

#### 3. –ó–∞–ø—É—Å–∫ MinIO (S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)

```bash
docker run --name crm-minio \
  -e MINIO_ROOT_USER=minioadmin \
  -e MINIO_ROOT_PASSWORD=minioadmin123 \
  -p 9000:9000 \
  -p 9001:9001 \
  -v minio_data:/data \
  -d minio/minio:latest server /data --console-address ":9001"
```

> **–í–∞–∂–Ω–æ:** –ó–∞–º–µ–Ω–∏—Ç–µ `MINIO_ROOT_PASSWORD` –Ω–∞ –Ω–∞–¥–µ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å. –û–±–Ω–æ–≤–∏—Ç–µ `.env` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ:
> ```
> S3_ENDPOINT_URL=http://localhost:9000
> S3_ACCESS_KEY=minioadmin
> S3_SECRET_KEY=minioadmin123 # <-- —Ç–æ—Ç —Å–∞–º—ã–π –ø–∞—Ä–æ–ª—å
> S3_BUCKET_NAME=crm-bucket # –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–∞–∫–µ—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
> S3_REGION=us-east-1
> ```
> –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:9001` –≤ –±—Ä–∞—É–∑–µ—Ä–µ (—Å –ª–æ–≥–∏–Ω–æ–º `minioadmin` / `minioadmin123`), —Å–æ–∑–¥–∞–π—Ç–µ –±–∞–∫–µ—Ç —Å –∏–º–µ–Ω–µ–º `crm-bucket`.

#### 4. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1.  –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –≤—ã–ø–æ–ª–Ω–∏–ª–∏ —à–∞–≥–∏ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ **"–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫"** –¥–æ –∫–æ–º–∞–Ω–¥—ã `docker-compose up -d`, –≤–∫–ª—é—á–∞—è —Å–æ–∑–¥–∞–Ω–∏–µ `.env` —Ñ–∞–π–ª–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫—É –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (`uv sync`).
2.  –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∫ PostgreSQL, –∫–æ—Ç–æ—Ä—ã–π —Ç–µ–ø–µ—Ä—å –∑–∞–ø—É—â–µ–Ω –æ—Ç–¥–µ–ª—å–Ω–æ:
    ```bash
    make migrate
    ```
    *(–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `uv run alembic upgrade head`, –∫–æ—Ç–æ—Ä–æ–µ —á–∏—Ç–∞–µ—Ç `DB_URL` –∏–∑ `.env`.)*

#### 5. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (PostgreSQL, Redis, MinIO) –±—É–¥—É—Ç –∑–∞–ø—É—â–µ–Ω—ã –∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã, –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∞–º–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:

```bash
make run
```
–∏–ª–∏
```bash
uv run python -m src.main
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ `.env` –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∑–∞–ø—É—â–µ–Ω–Ω—ã–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º.

#### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

–ö–æ–≥–¥–∞ –∑–∞–∫–æ–Ω—á–∏—Ç–µ —Ä–∞–±–æ—Ç—É, –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏ —É–¥–∞–ª–∏—Ç–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:

```bash
docker stop crm-postgres crm-redis crm-minio
docker rm crm-postgres crm-redis crm-minio
# –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ: —É–¥–∞–ª–∏—Ç—å —Ç–æ–º MinIO
docker volume rm minio_data
```

5. **–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**

   ```bash
   make migrate
   ```

6. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**

   ```bash
   make run
   ```
   –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:8000`.

---

### ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –∏ –∑–∞–¥–∞–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```env
DB_URL=postgresql://username:password@localhost:5432/crm_db
REDIS_URL=redis://localhost:6379
S3_ENDPOINT_URL=http://localhost:9000
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_BUCKET_NAME=crm-bucket
S3_REGION=us-east-1
ADMIN_EMAIL=admin@example.com
ADMIN_FULL_NAME=Admin User
ADMIN_PASSWORD=supersecret
```

---

### üë®‚Äçüíª –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

#### –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
make run
```

#### –ó–∞–ø—É—Å–∫ —Å –æ—Ç–ª–∞–¥–∫–æ–π

```bash
make dev
```

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
uv sync

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
uv sync --dev
```

---

### üóÉÔ∏è –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ú–∏–≥—Ä–∞—Ü–∏–∏ —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é Alembic.

- **–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é:**

  ```bash
  make revision m="–û–ø–∏—Å–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏"
  ```

- **–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏:**

  ```bash
  make migrate
  ```

- **–û—Ç–∫–∞—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –º–∏–≥—Ä–∞—Ü–∏—é:**

  ```bash
  make rollback
  ```

- **–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é –º–∏–≥—Ä–∞—Ü–∏–π:**

  ```bash
  make history
  ```

- **–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:**

  ```bash
  make current
  ```

---

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–¢–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `pytest`.

- **–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã:**

  ```bash
  make test
  ```

- **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º:**

  ```bash
  make test-cov
  ```

---

### ü§ù –ì–∞–π–¥ –¥–ª—è –∫–æ–Ω—Ç—Ä–∏–±—å—é—Ç–µ—Ä–æ–≤

#### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ä–∞–±–æ—á–µ–≥–æ –º–µ—Å—Ç–∞

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (—Å–º. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–∑–∞–ø—É—Å–∫)).
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `pre-commit` —Ö—É–∫–∏:

  ```bash
  pre-commit install
  ```

  –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä–∫—É –∫–æ–¥–∞ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∫–æ–º–º–∏—Ç–æ–º.

#### 2. –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –≤–µ—Ç–∫—É –æ—Ç `main`:

   ```bash
   git checkout -b feature/your-feature-name
   ```

2. –í–Ω–æ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –ø–∏—à–∏—Ç–µ —Ç–µ—Å—Ç—ã, —Å–ª–µ–¥—É–π—Ç–µ [—Å—Ç–∏–ª—é –∫–æ–¥–∞](#-—Å—Ç–∏–ª—å-–∫–æ–¥–∞).

3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç:

   ```bash
   make test
   ```

4. –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git add`, `git commit`). `pre-commit` –≤—ã–ø–æ–ª–Ω–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏.

5. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –≤–µ—Ç–∫—É –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

   ```bash
   git push origin feature/your-feature-name
   ```

6. –°–æ–∑–¥–∞–π—Ç–µ Pull Request (PR) –≤ GitHub.

#### 3. –û–±–∑–æ—Ä PR
- –ü–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è PR –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–∏—Ç –≤ `main`.

---

### üßº –°—Ç–∏–ª—å –∫–æ–¥–∞

- **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ö–æ–¥ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é `ruff format`. –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ `pre-commit`.
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–æ–∫:** `ruff check`. –¢–∞–∫–∂–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `pre-commit`.
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤:** `mypy`. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `pre-commit`.

---

### üî§ –°–æ–≥–ª–∞—à–µ–Ω–∏—è –ø–æ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—é

- **–ò–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤:** `snake_case.py` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `user_service.py`).
- **–ò–º–µ–Ω–∞ –∫–ª–∞—Å—Å–æ–≤:** `PascalCase` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `UserService`).
- **–ò–º–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–π –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:** `snake_case` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `get_user`).
- **–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:** `UPPER_CASE` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `DEFAULT_PAGE_SIZE`).
- **–ò–º–µ–Ω–∞ –≤–µ—Ç–æ–∫ Git:** `feature/...`, `bugfix/...`, `hotfix/...`.

---

### üõ†Ô∏è –ö–æ–º–∞–Ω–¥—ã Make

–§–∞–π–ª `Makefile` —Å–æ–¥–µ—Ä–∂–∏—Ç —É–¥–æ–±–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

```makefile
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
run:
	uv run python -m src.main

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π (dev)
dev:
	uv run watchfiles --filter python "python -m src.main"

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
test:
	uv run python -m pytest

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
test-cov:
	uv run python -m pytest --cov=src --cov-report=html

# –°–æ–∑–¥–∞—Ç—å –ø—É—Å—Ç—É—é –º–∏–≥—Ä–∞—Ü–∏—é
revision:
	uv run alembic revision -m "$(m)"

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
migrate:
	uv run alembic upgrade head

# –û—Ç–∫–∞—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –º–∏–≥—Ä–∞—Ü–∏—é
rollback:
	uv run alembic downgrade -1

# –ò—Å—Ç–æ—Ä–∏—è –º–∏–≥—Ä–∞—Ü–∏–π
history:
	uv run alembic history --verbose

# –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
current:
	uv run alembic current
```

---
